/*! For license information please see kt-dot.min.js.LICENSE.txt */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.kt=i():(t.kt=t.kt||{},t.kt.Dot=i())}(self,(()=>(()=>{"use strict";var t={d:(i,s)=>{for(var e in s)t.o(s,e)&&!t.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:s[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};t.d(i,{default:()=>r});class s{static EVEN_ODD_OFFSET=6;#t;#i;#s;constructor(t,i,s){this.#t=t,this.#i=i,this.#s=s}drawTextFrame(t,i,s,e){t.save(),t.font=this.#t.font,t.fillStyle=this.#s,t.textBaseline="middle";const o=t.measureText(i);return t.fillText(i,(s-o.width)/2,(e+o.actualBoundingBoxAscent-o.actualBoundingBoxDescent)/2),t.restore(),{textField:{left:(s-o.width)/2,top:(e-o.actualBoundingBoxAscent-o.actualBoundingBoxDescent)/2,width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent},dots:this.#e(t,s,e)}}#e(t,i,e){const o=t.getImageData(0,0,i,e).data,a=[];let h,n=0,r=0;for(let t=0;t<e;t+=this.#i)for(n=r++%2*s.EVEN_ODD_OFFSET;n<i;n+=this.#i)h=o[4*(n+t*i)+3],h&&a.push({x:n,y:t});return a}}const e=2*Math.PI;function o(t,i,s,e){const o=s-t,a=e-i;return Math.sqrt(o*o+a*a)}function a(t){const i=t.toLowerCase();if(i.includes("rgb")){const t=i.indexOf("("),s=i.indexOf(")"),e=i.substring(t+1,s).split(", ");return{r:e[0],g:e[1],b:e[2]}}}class h{static PLUCK_COUNT_OFFSET=1.5;#o;#a;#h;constructor(t){this.#o=t}init(t,i,s){return this.#a=0,this.#h=this.#n(t,i,s),Math.ceil(this.#h/this.#o)*h.PLUCK_COUNT_OFFSET}animate(){this.#a+=this.#o*(this.#a<this.#h)}#n(t,i,s){const e=o(s.left,s.top,t,i),a=o(s.left+s.width-1,s.top,t,i),h=o(s.left,s.top+s.height-1,t,i),n=o(s.left+s.width-1,s.top+s.height-1,t,i);return Math.max(e,a,h,n)}get radius(){return this.#a}set radius(t){this.#a=t}}class n{static BOUNCE=.82;static FPS=15;static FPS_TIME=1e3/n.FPS;static FRICTION=.86;static RADIUS_OFFSET=.85;static INVALID=-1;#r;#d;#c;#l;#u;#p;#x;#g;#m;#R;#a;#f;#C;#v;constructor(t,i,s,e){this.#r=t,this.#d=i*n.RADIUS_OFFSET,this.#p=s,this.#u=e,this.#c=0,this.#l=[this.#d/n.FPS*-1,this.#d/n.FPS],this.init()}init(){this.#x=this.#p,this.#g={x:this.#r.x,y:this.#r.y},this.#m={vx:0,vy:0},this.#a=0,this.#f=0,this.#C=0,this.#R=this.#d+this.#l[this.#C],this.#v=n.INVALID}pluckAnimate(t){t.save(),t.fillStyle=`rgba(\n      ${this.#u.r}, \n      ${this.#u.g}, \n      ${this.#u.b}, \n      0.8)`,t.fillRect(this.#r.x-this.#a,this.#r.y-this.#a,2*this.#a,2*this.#a);const i=(this.#d-this.#a)/2;this.#f=(this.#f+i)*n.BOUNCE,this.#a+=this.#f,t.beginPath(),t.fillStyle=`rgb(\n      ${this.#x.r}, \n      ${this.#x.g}, \n      ${this.#x.b})`,t.arc(this.#r.x,this.#r.y,this.#a*n.RADIUS_OFFSET,0,e,!1),t.fill(),t.restore()}kineticAnimate(t,i){this.#y(i),this.#m.vx*=n.FRICTION,this.#m.vy*=n.FRICTION,this.#g.x+=this.#m.vx,this.#g.y+=this.#m.vy,t.beginPath(),t.fillStyle=`rgb(\n      ${this.#x.r}, \n      ${this.#x.g}, \n      ${this.#x.b})`,t.ellipse(this.#g.x,this.#g.y,this.#R,this.#a*n.RADIUS_OFFSET,0,0,e),t.fill()}#y(t){this.#c||(this.#c=t),t-this.#c>n.FPS_TIME&&(this.#c=t,this.#B())}#B(){if(this.#v>0){const t=Math.round(16777215*Math.random());this.#x={r:t>>16&255,g:t>>8&255,b:255&t},this.#v--}else this.#v!==n.INVALID&&(this.#x=this.#p,this.#v=n.INVALID);this.#R<1?this.#C=1:this.#R>=this.#a*n.RADIUS_OFFSET&&(this.#C=0),this.#R+=this.#l[this.#C]}collide(){this.#v=n.FPS}get posVelocity(){return this.#m}set posVelocity(t){this.#m=t}get pos(){return this.#g}}class r extends class{#T;#F;#D;#S;#O;constructor(){this.#T=document.createElement("canvas"),this.#F=this.#T.getContext("2d"),document.body.append(this.#T),this.#D=window.devicePixelRatio>1?2:1}destroy(){this.clearCanvas(),document.body.removeChild(this.#T)}resize(){this.#S=document.body.clientWidth,this.#O=document.body.clientHeight,this.#T.width=this.#S*this.#D,this.#T.height=this.#O*this.#D,this.#F.scale(this.#D,this.#D)}clearCanvas(){this.#F.clearRect(0,0,this.#S,this.#O)}addEventToCanvas(t,i){this.#T.addEventListener(t,i)}removeEventToCanvas(t,i){this.#T.removeEventListener(t,i)}get ctx(){return this.#F}get stageWidth(){return this.#S}get stageHeight(){return this.#O}}{static DOT_RADIUS=10;static RADIUS=10;static MATCH_MEDIA=window.matchMedia("(max-width: 768px)").matches;static BG_COLOR="rgba(0, 0, 0)";static DOT_COLOR="rgb(255, 255, 255)";#I;#i;#P;#k=[];#A=0;#M;#E={x:0,y:0};#b;#w;#_;#V=!1;#G={x:0,y:0,radius:100};#L;constructor(t,i,e=10,o=!1){super(),this.#I=r.DOT_RADIUS,this.#i=2*this.#I,this.#P=e,this.#b=i,this.#L=o,this.textFrame=new s(t,this.#i,r.BG_COLOR),this.ripple=new h(this.#P),this.addEventToCanvas("click",this.onClick),document.addEventListener("pointermove",this.onMouseMove)}destroy(){this.removeEventToCanvas("click",this.onClick),document.removeEventListener("pointermove",this.onMouseMove),super.destroy()}resize=()=>{var t;super.resize(),this.addDotItemOnTextField(),r.MATCH_MEDIA?this.onClick({offsetX:0,offsetY:0}):this.onClick({offsetX:(t=this.#_).left+Math.random()*t.width,offsetY:t.top+Math.random()*t.height})};animate=t=>{this.#V?this.KineticAnimate(t):this.pluckAnimate()};onClick=t=>{var i,s;r.MATCH_MEDIA&&(i={x:t.offsetX,y:t.offsetY},(s=this.#_).left<=i.x&&i.x<=s.left+s.width-1&&s.top<=i.y&&i.y<=s.top+s.height-1)||(this.#k.forEach((t=>t.init())),this.#A=0,this.#E={x:t.offsetX,y:t.offsetY},this.#M=this.ripple.init(this.#E.x,this.#E.y,this.#_),this.clearCanvas(),this.textFrame.drawTextFrame(this.ctx,this.#w,this.stageWidth,this.stageHeight),this.#V=!1)};onMouseMove=t=>{this.#G.x=t.clientX,this.#G.y=t.clientY};pluckAnimate(){this.ripple.animate(),this.#k.filter((t=>{return i=t.pos,s=this.#E,e=this.ripple.radius,o(i.x,i.y,s.x,s.y)<=e;var i,s,e})).forEach((t=>t.pluckAnimate(this.ctx))),this.#A>=this.#M?this.#V=!0:this.#A++}KineticAnimate(t){let i,s,e,o,a,h,n,d,c;this.clearCanvas(),this.#k.forEach((l=>{i=this.#G.x-l.pos.x,s=this.#G.y-l.pos.y,e=Math.sqrt(i*i+s*s),o=r.RADIUS+this.#G.radius,e<o&&(a=Math.atan2(s,i),h=l.pos.x+Math.cos(a)*o,n=l.pos.y+Math.sin(a)*o,d=h-this.#G.x,c=n-this.#G.y,l.posVelocity.vx-=d,l.posVelocity.vy-=c,l.collide()),l.kineticAnimate(this.ctx,t)}))}addDotItemOnTextField(){this.#k=[],this.#w=this.#L?function(t){const i=t.split("");return i[Math.round(Math.random()*(i.length-1))]}(this.#b):this.#b,this.clearCanvas();const t=this.textFrame.drawTextFrame(this.ctx,this.#w,this.stageWidth,this.stageHeight),i=t.dots;this.#_=t.textField,i.forEach((t=>{this.#k.push(new n(t,this.#I,a(r.DOT_COLOR),a(r.BG_COLOR)))}))}}return i.default})()));