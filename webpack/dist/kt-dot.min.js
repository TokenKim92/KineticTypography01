/*! For license information please see kt-dot.min.js.LICENSE.txt */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.kt=i():(t.kt=t.kt||{},t.kt.Dot=i())}(self,(()=>(()=>{"use strict";var t={d:(i,e)=>{for(var s in e)t.o(e,s)&&!t.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};t.d(i,{default:()=>r});class e{static EVEN_ODD_OFFSET=6;#t;#i;#e;constructor(t,i,e){this.#t=t,this.#i=i,this.#e=e}drawTextFrame=(t,i,e,s)=>{t.save(),t.font=this.#t.font,t.fillStyle=this.#e,t.textBaseline="middle";const o=t.measureText(i);return t.fillText(i,(e-o.width)/2,(s+o.actualBoundingBoxAscent-o.actualBoundingBoxDescent)/2),t.restore(),{textField:{left:(e-o.width)/2,top:(s-o.actualBoundingBoxAscent-o.actualBoundingBoxDescent)/2,width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent},dots:this.#s(t,e,s)}};#s(t,i,s){const o=t.getImageData(0,0,i,s).data,a=[];let h,n=0,r=0;for(let t=0;t<s;t+=this.#i)for(n=r++%2*e.EVEN_ODD_OFFSET;n<i;n+=this.#i)h=o[4*(n+t*i)+3],h&&a.push({x:n,y:t});return a}}const s=2*Math.PI;function o(t,i,e,s){const o=e-t,a=s-i;return Math.sqrt(o*o+a*a)}function a(t){const i=t.toLowerCase();if(i.includes("rgb")){const t=i.indexOf("("),e=i.indexOf(")"),s=i.substring(t+1,e).split(", ");return{r:s[0],g:s[1],b:s[2]}}}class h{static PLUCK_COUNT_OFFSET=1.5;#o;#a;#h;constructor(t){this.#o=t}init(t,i,e){return this.#a=0,this.#h=this.#n(t,i,e),Math.ceil(this.#h/this.#o)*h.PLUCK_COUNT_OFFSET}animate(){this.#a+=this.#o*(this.#a<this.#h)}#n(t,i,e){const s=o(e.left,e.top,t,i),a=o(e.left+e.width-1,e.top,t,i),h=o(e.left,e.top+e.height-1,t,i),n=o(e.left+e.width-1,e.top+e.height-1,t,i);return Math.max(s,a,h,n)}get radius(){return this.#a}set radius(t){this.#a=t}}class n{static BOUNCE=.82;static FPS=15;static FPS_TIME=1e3/n.FPS;static FRICTION=.86;static RADIUS_OFFSET=.85;static INVALID=-1;#r;#c;#l;#d;#u;#x;#g;#p;#m;#v;#a;#f;#R;#T;constructor(t,i,e,s){this.#r=t,this.#c=i*n.RADIUS_OFFSET,this.#x=e,this.#u=s,this.#l=0,this.#d=[this.#c/n.FPS*-1,this.#c/n.FPS],this.init()}init(){this.#g=this.#x,this.#p={x:this.#r.x,y:this.#r.y},this.#m={vx:0,vy:0},this.#a=0,this.#f=0,this.#R=0,this.#v=this.#c+this.#d[this.#R],this.#T=n.INVALID}pluckAnimate=t=>{t.save(),t.fillStyle=`rgba(\n      ${this.#u.r}, \n      ${this.#u.g}, \n      ${this.#u.b}, \n      0.8)`,t.fillRect(this.#r.x-this.#a,this.#r.y-this.#a,2*this.#a,2*this.#a);const i=(this.#c-this.#a)/2;this.#f=(this.#f+i)*n.BOUNCE,this.#a+=this.#f,t.beginPath(),t.fillStyle=`rgb(\n      ${this.#g.r}, \n      ${this.#g.g}, \n      ${this.#g.b})`,t.arc(this.#r.x,this.#r.y,this.#a*n.RADIUS_OFFSET,0,s,!1),t.fill(),t.restore()};kineticAnimate=(t,i)=>{this.#y(i),this.#m.vx*=n.FRICTION,this.#m.vy*=n.FRICTION,this.#p.x+=this.#m.vx,this.#p.y+=this.#m.vy,t.beginPath(),t.fillStyle=`rgb(\n      ${this.#g.r}, \n      ${this.#g.g}, \n      ${this.#g.b})`,t.ellipse(this.#p.x,this.#p.y,this.#v,this.#a*n.RADIUS_OFFSET,0,0,s),t.fill()};#y(t){this.#l||(this.#l=t),t-this.#l>n.FPS_TIME&&(this.#l=t,this.#C())}#C(){if(this.#T>0){const t=Math.round(16777215*Math.random());this.#g={r:t>>16&255,g:t>>8&255,b:255&t},this.#T--}else this.#T!==n.INVALID&&(this.#g=this.#x,this.#T=n.INVALID);this.#v<1?this.#R=1:this.#v>=this.#a*n.RADIUS_OFFSET&&(this.#R=0),this.#v+=this.#d[this.#R]}collide(){this.#T=n.FPS}get posVelocity(){return this.#m}set posVelocity(t){this.#m=t}get pos(){return this.#p}}class r extends class{#F;#S;#B;#D;#k;#I;constructor(t=!1){this.#F=document.createElement("canvas"),this.#S=this.#F.getContext("2d"),document.body.append(this.#F),this.#B=window.devicePixelRatio>1?2:1,this.#I=t,this.#I&&this.#F.classList.add("canvas-full")}resize(t=0,i=0){this.#D=0===t?document.body.clientWidth:t,this.#k=0===i?document.body.clientHeight:i,this.#F.width=this.#D*this.#B,this.#F.height=this.#k*this.#B,this.#S.scale(this.#B,this.#B)}clearCanvas(){this.#S.clearRect(0,0,this.#D,this.#k)}animateTarget(t,...i){return t(this.#S,...i)}saveCanvas(){this.#S.save()}restoreCanvas(){this.#S.restore()}addEventToCanvas(t,i){this.#F.addEventListener(t,i)}removeEventFromCanvas(t,i){this.#F.removeEventListener(t,i)}bringToStage(){document.body.append(this.#F)}removeFromStage(){this.clearCanvas(),document.body.removeChild(this.#F)}fill(){this.#S.fill()}fillRect(t,i,e,s){this.#S.fillRect(t,i,e,s)}fillText(t,i,e,s){this.#S.fillText(t,i,e,s)}measureText(t){return this.#S.measureText(t)}translate(t,i){this.#S.translate(t,i)}scale(t,i){this.#S.scale(t,i)}rotate(t){this.#S.rotate(t)}beginPath(){this.#S.beginPath()}stroke(){this.#S.stroke()}arc(t,i,e,s,o,a=!1){this.#S.arc(t,i,e,s,o,a)}moveTo(t,i){this.#S.moveTo(t,i)}lineTo(t,i){this.#S.lineTo(t,i)}drawImage(t,i,e,s,o,a,h,n,r){this.#S.drawImage(t,i,e,s,o,a,h,n,r)}getImageData(t,i,e,s,o){return this.#S.getImageData(t,i,e,s,o)}setPosition(t,i){if(this.#I)throw new Error("Positioning is not possible in full screen mode.");this.#F.style.left=`${t}px`,this.#F.style.top=`${i}px`}getFont(){return this.#S.font}setFont(t){return this.#S.font=t}getFillStyle(){return this.#S.fillStyle}setFillStyle(t){this.#S.fillStyle=t}getStrokeStyle(){return this.#S.strokeStyle}setStrokeStyle(t){this.#S.strokeStyle=t}getLineWidth(){return this.#S.lineWidth}setLineWidth(t){this.#S.lineWidth=t}getTextAlign(){return this.#S.textAlign}setTextAlign(t){return this.#S.textAlign=t}getTextBaseline(){return this.#S.textBaseline}setTextBaseline(t){this.#S.textBaseline=t}get stageWidth(){return this.#D}get stageHeight(){return this.#k}get pixelRatio(){return this.#B}}{static DOT_RADIUS=10;static RADIUS=10;static MATCH_MEDIA=window.matchMedia("(max-width: 768px)").matches;static BG_COLOR="rgba(0, 0, 0)";static DOT_COLOR="rgb(255, 255, 255)";#P;#i;#b;#E=[];#O=0;#A;#M={x:0,y:0};#w;#_;#V;#G=!1;#L={x:0,y:0,radius:100};#U;constructor(t,i,s=10,o=!1){super(!0),this.#P=r.DOT_RADIUS,this.#i=2*this.#P,this.#b=s,this.#w=i,this.#U=o,this.textFrame=new e(t,this.#i,r.BG_COLOR),this.ripple=new h(this.#b),this.initEvents()}initEvents(){this.addEventToCanvas("click",this.onClick),document.addEventListener("pointermove",this.onMouseMove)}removeEvents(){this.removeEventFromCanvas("click",this.onClick),document.removeEventListener("pointermove",this.onMouseMove)}bringToStage(){super.bringToStage(),this.initEvents()}removeFromStage(){this.removeEvents(),super.removeFromStage()}resize=()=>{var t;super.resize(),this.addDotItemOnTextField(),r.MATCH_MEDIA?this.onClick({offsetX:0,offsetY:0}):this.onClick({offsetX:(t=this.#V).left+Math.random()*t.width,offsetY:t.top+Math.random()*t.height})};animate=t=>{this.#G?this.KineticAnimate(t):this.pluckAnimate()};onClick=t=>{var i,e;r.MATCH_MEDIA&&(i={x:t.offsetX,y:t.offsetY},(e=this.#V).left<=i.x&&i.x<=e.left+e.width-1&&e.top<=i.y&&i.y<=e.top+e.height-1)||(this.#E.forEach((t=>t.init())),this.#O=0,this.#M={x:t.offsetX,y:t.offsetY},this.#A=this.ripple.init(this.#M.x,this.#M.y,this.#V),this.clearCanvas(),this.animateTarget(this.textFrame.drawTextFrame,this.#_,this.stageWidth,this.stageHeight),this.#G=!1)};onMouseMove=t=>{this.#L.x=t.clientX,this.#L.y=t.clientY};pluckAnimate(){this.ripple.animate(),this.#E.filter((t=>{return i=t.pos,e=this.#M,s=this.ripple.radius,o(i.x,i.y,e.x,e.y)<=s;var i,e,s})).forEach((t=>this.animateTarget(t.pluckAnimate,1,2))),this.#O>=this.#A?this.#G=!0:this.#O++}KineticAnimate(t){let i,e,s,o,a,h,n,c,l;this.clearCanvas(),this.#E.forEach((d=>{i=this.#L.x-d.pos.x,e=this.#L.y-d.pos.y,s=Math.sqrt(i*i+e*e),o=r.RADIUS+this.#L.radius,s<o&&(a=Math.atan2(e,i),h=d.pos.x+Math.cos(a)*o,n=d.pos.y+Math.sin(a)*o,c=h-this.#L.x,l=n-this.#L.y,d.posVelocity.vx-=c,d.posVelocity.vy-=l,d.collide()),this.animateTarget(d.kineticAnimate,t)}))}addDotItemOnTextField(){this.#E=[],this.#_=this.#U?function(t){const i=t.split("");return i[Math.round(Math.random()*(i.length-1))]}(this.#w):this.#w,this.clearCanvas();const t=this.animateTarget(this.textFrame.drawTextFrame,this.#_,this.stageWidth,this.stageHeight),i=t.dots;this.#V=t.textField,i.forEach((t=>{this.#E.push(new n(t,this.#P,a(r.DOT_COLOR),a(r.BG_COLOR)))}))}}return i.default})()));